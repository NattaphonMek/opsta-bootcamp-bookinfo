FROM python:3.8-bullseye

WORKDIR /app
COPY . .

ARG DETAILS_HOSTNAME
ARG RATINGS_HOSTNAME
ARG REVIEWS_HOSTNAME
ENV DETAILS_HOSTNAME ${DETAILS_HOSTNAME:-http://details:8081/}
ENV RATINGS_HOSTNAME ${RATINGS_HOSTNAME:-http://ratings:8080/}
ENV REVIEWS_HOSTNAME ${REVIEWS_HOSTNAME:-http://reviews:8082/}

RUN pip install -r requirements.txt

EXPOSE 8083

CMD ["python","/app/productpage.py","8083"]